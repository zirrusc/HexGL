var DAT=DAT||{};DAT.GUI=function(a){void 0==a&&(a={});var b=!1;void 0==a.height?a.height=300:b=!0;var d=[],c=[],i=!0,f,h,j=this,g=!0,e=280;void 0!=a.width&&(e=a.width);var q=!1,k,p,n=0,r;this.domElement=document.createElement("div"),this.domElement.setAttribute("class","guidat"),this.domElement.style.width=e+"px";var l=a.height,m=document.createElement("div");m.setAttribute("class","guidat-controllers"),m.style.height=l+"px",m.addEventListener("DOMMouseScroll",function(a){var b=this.scrollTop;a.wheelDelta?b+=a.wheelDelta:a.detail&&(b+=a.detail),a.preventDefault&&a.preventDefault(),a.returnValue=!1,m.scrollTop=b},!1);var o=document.createElement("a");o.setAttribute("class","guidat-toggle"),o.setAttribute("href","#"),o.innerHTML=g?"Close Controls":"Open Controls";var t=!1,C=0,x=0,u=!1,v,y,w,z,D=function(a){if(y=v,z=w,v=a.pageY,w=a.pageX,a=v-y,!g){if(!(a>0))return;g=!0,l=k=1,o.innerHTML=p||"Close Controls"}var b=z-w;if(a>0&&l>h){var c=DAT.GUI.map(l,h,h+100,1,0);a*=c}t=!0,C+=a,k+=a,l+=a,m.style.height=k+"px",x+=b,e+=b,e=DAT.GUI.constrain(e,240,500),j.domElement.style.width=e+"px",A()};o.addEventListener("mousedown",function(a){return y=v=a.pageY,z=w=a.pageX,u=!0,a.preventDefault(),C=x=0,document.addEventListener("mousemove",D,!1),!1},!1),o.addEventListener("click",function(a){return a.preventDefault(),!1},!1),document.addEventListener("mouseup",function(a){if(u&&!t&&j.toggle(),u&&t)if(0==x&&B(),k>h)clearTimeout(r),k=n=h,s();else if(m.children.length>=1){var b=m.children[0].offsetHeight;clearTimeout(r),n=Math.round(l/b)*b-1,0>=n?(j.close(),k=2*b):(k=n,s())}return document.removeEventListener("mousemove",D,!1),a.preventDefault(),u=t=!1},!1),this.domElement.appendChild(m),this.domElement.appendChild(o),a.domElement?a.domElement.appendChild(this.domElement):DAT.GUI.autoPlace&&(null==DAT.GUI.autoPlaceContainer&&(DAT.GUI.autoPlaceContainer=document.createElement("div"),DAT.GUI.autoPlaceContainer.setAttribute("id","guidat"),document.body.appendChild(DAT.GUI.autoPlaceContainer)),DAT.GUI.autoPlaceContainer.appendChild(this.domElement)),this.autoListenIntervalTime=1e3/60;var E=function(){f=setInterval(function(){j.listen()},this.autoListenIntervalTime)};this.__defineSetter__("autoListen",function(a){(i=a)?c.length>0&&E():clearInterval(f)}),this.__defineGetter__("autoListen",function(){return i}),this.listenTo=function(a){0==c.length&&E(),c.push(a)},this.unlistenTo=function(a){for(var b=0;b<c.length;b++)c[b]==a&&c.splice(b,1);c.length<=0&&clearInterval(f)},this.listen=function(a){var b,a=a||c;for(b in a)a[b].updateDisplay()},this.listenAll=function(){this.listen(d)},this.autoListen=!0;var F=function(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c};this.add=function(){if(1==arguments.length){var a,c=[];for(a in arguments[0])c.push(j.add(arguments[0],a));return c}c=arguments[0],a=arguments[1];a:for(var e in d)if(d[e].object==c&&d[e].propertyName==a)break a;if(e=c[a],void 0==e&&c.get&&(e=c.get(a)),void 0==e)DAT.GUI.error(c+" either has no property '"+a+"', or the property is inaccessible.");else if(c=typeof e,e=G[c],void 0==e)DAT.GUI.error("Cannot create controller for data type '"+c+"'");else{for(var f=[this],g=0;g<arguments.length;g++)f.push(arguments[g]);if(e=F(e,f)){if(m.appendChild(e.domElement),d.push(e),DAT.GUI.allControllers.push(e),"function"!=c&&DAT.GUI.saveIndex<DAT.GUI.savedValues.length&&(e.setValue(DAT.GUI.savedValues[DAT.GUI.saveIndex]),DAT.GUI.saveIndex++),A(),q||(k=h),!b)try{arguments.callee.caller==window.onload&&(l=n=k=h,m.style.height=l+"px")}catch(i){}return e}DAT.GUI.error("Error creating controller for '"+a+"'.")}};var A=function(){h=0;for(var a in d)h+=d[a].domElement.offsetHeight;m.style.overflowY=h-1>k?"auto":"hidden"},G={number:DAT.GUI.ControllerNumber,string:DAT.GUI.ControllerString,"boolean":DAT.GUI.ControllerBoolean,"function":DAT.GUI.ControllerFunction};this.reset=function(){for(var a=0,b=DAT.GUI.allControllers.length;b>a;a++)DAT.GUI.allControllers[a].reset()},this.toggle=function(){g?this.close():this.open()},this.open=function(){o.innerHTML=p||"Close Controls",n=k,clearTimeout(r),s(),B(),g=!0},this.close=function(){o.innerHTML=p||"Open Controls",n=0,clearTimeout(r),s(),B(),g=!1},this.name=function(a){p=a,o.innerHTML=a},this.appearanceVars=function(){return[g,e,k,m.scrollTop]};var s=function(){l=m.offsetHeight,l+=.6*(n-l),Math.abs(l-n)<1?l=n:r=setTimeout(s,1e3/30),m.style.height=Math.round(l)+"px",A()},B=function(){j.domElement.style.width=e-1+"px",setTimeout(function(){j.domElement.style.width=e+"px"},1)};if(DAT.GUI.guiIndex<DAT.GUI.savedAppearanceVars.length){if(e=parseInt(DAT.GUI.savedAppearanceVars[DAT.GUI.guiIndex][1]),j.domElement.style.width=e+"px",k=parseInt(DAT.GUI.savedAppearanceVars[DAT.GUI.guiIndex][2]),q=!0,1==eval(DAT.GUI.savedAppearanceVars[DAT.GUI.guiIndex][0])){var l=k,H=DAT.GUI.savedAppearanceVars[DAT.GUI.guiIndex][3];setTimeout(function(){m.scrollTop=H},0),DAT.GUI.scrollTop>-1&&(document.body.scrollTop=DAT.GUI.scrollTop),n=k,this.open()}DAT.GUI.guiIndex++}DAT.GUI.allGuis.push(this),1==DAT.GUI.allGuis.length&&(window.addEventListener("keyup",function(a){!DAT.GUI.supressHotKeys&&72==a.keyCode&&DAT.GUI.toggleHide()},!1),DAT.GUI.inlineCSS)&&(a=document.createElement("style"),a.setAttribute("type","text/css"),a.innerHTML=DAT.GUI.inlineCSS,document.head.insertBefore(a,document.head.firstChild))},DAT.GUI.hidden=!1,DAT.GUI.autoPlace=!0,DAT.GUI.autoPlaceContainer=null,DAT.GUI.allControllers=[],DAT.GUI.allGuis=[],DAT.GUI.supressHotKeys=!1,DAT.GUI.toggleHide=function(){DAT.GUI.hidden?DAT.GUI.open():DAT.GUI.close()},DAT.GUI.open=function(){DAT.GUI.hidden=!1;for(var a in DAT.GUI.allGuis)DAT.GUI.allGuis[a].domElement.style.display="block"},DAT.GUI.close=function(){DAT.GUI.hidden=!0;for(var a in DAT.GUI.allGuis)DAT.GUI.allGuis[a].domElement.style.display="none"},DAT.GUI.saveURL=function(){var a=DAT.GUI.replaceGetVar("saveString",DAT.GUI.getSaveString());window.location=a},DAT.GUI.scrollTop=-1,DAT.GUI.load=function(a){var a=a.split(","),b=parseInt(a[0]);DAT.GUI.scrollTop=parseInt(a[1]);for(var c=0;b>c;c++){var d=a.splice(2,4);DAT.GUI.savedAppearanceVars.push(d)}DAT.GUI.savedValues=a.splice(2,a.length)},DAT.GUI.savedValues=[],DAT.GUI.savedAppearanceVars=[],DAT.GUI.getSaveString=function(){var a,b=[];b.push(DAT.GUI.allGuis.length),b.push(document.body.scrollTop);for(a in DAT.GUI.allGuis)for(var c=DAT.GUI.allGuis[a].appearanceVars(),d=0;d<c.length;d++)b.push(c[d]);for(a in DAT.GUI.allControllers)"function"!=DAT.GUI.allControllers[a].type&&(c=DAT.GUI.allControllers[a].getValue(),"number"==DAT.GUI.allControllers[a].type&&(c=DAT.GUI.roundToDecimal(c,4)),b.push(c));return b.join(",")},DAT.GUI.getVarFromURL=function(a){for(var b,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)if(b=c[d].split("="),void 0!=b&&b[0]==a)return b[1];return null},DAT.GUI.replaceGetVar=function(a,b){for(var c,d=window.location.href,e=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),f=0;f<e.length;f++)if(c=e[f].split("="),void 0!=c&&c[0]==a)return d.replace(c[1],b);return-1!=window.location.href.indexOf("?")?d+"&"+a+"="+b:d+"?"+a+"="+b},DAT.GUI.saveIndex=0,DAT.GUI.guiIndex=0,DAT.GUI.showSaveString=function(){alert(DAT.GUI.getSaveString())},DAT.GUI.makeUnselectable=function(a){if(void 0!=a&&void 0!=a.style){a.onselectstart=function(){return!1},a.style.MozUserSelect="none",a.style.KhtmlUserSelect="none",a.unselectable="on";for(var a=a.childNodes,b=0;b<a.length;b++)DAT.GUI.makeUnselectable(a[b])}},DAT.GUI.makeSelectable=function(a){if(void 0!=a&&void 0!=a.style){a.onselectstart=function(){},a.style.MozUserSelect="auto",a.style.KhtmlUserSelect="auto",a.unselectable="off";for(var a=a.childNodes,b=0;b<a.length;b++)DAT.GUI.makeSelectable(a[b])}},DAT.GUI.map=function(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))},DAT.GUI.constrain=function(a,b,c){return b>a?a=b:a>c&&(a=c),a},DAT.GUI.error=function(a){"function"==typeof console.error&&console.error("[DAT.GUI ERROR] "+a)},DAT.GUI.roundToDecimal=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},DAT.GUI.extendController=function(a){a.prototype=new DAT.GUI.Controller,a.prototype.constructor=a},DAT.GUI.addClass=function(a,b){DAT.GUI.hasClass(a,b)||(a.className+=" "+b)},DAT.GUI.hasClass=function(a,b){return-1!=a.className.indexOf(b)},DAT.GUI.removeClass=function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")},null!=DAT.GUI.getVarFromURL("saveString")&&DAT.GUI.load(DAT.GUI.getVarFromURL("saveString")),DAT.GUI.Controller=function(){this.parent=arguments[0],this.object=arguments[1],this.propertyName=arguments[2],arguments.length>0&&(this.initialValue=this.object[this.propertyName]),this.domElement=document.createElement("div"),this.domElement.setAttribute("class","guidat-controller "+this.type),this.propertyNameElement=document.createElement("span"),this.propertyNameElement.setAttribute("class","guidat-propertyname"),this.name(this.propertyName),this.domElement.appendChild(this.propertyNameElement),DAT.GUI.makeUnselectable(this.domElement)},DAT.GUI.Controller.prototype.changeFunction=null,DAT.GUI.Controller.prototype.finishChangeFunction=null,DAT.GUI.Controller.prototype.name=function(a){return this.propertyNameElement.innerHTML=a,this},DAT.GUI.Controller.prototype.reset=function(){return this.setValue(this.initialValue),this},DAT.GUI.Controller.prototype.listen=function(){return this.parent.listenTo(this),this},DAT.GUI.Controller.prototype.unlisten=function(){return this.parent.unlistenTo(this),this},DAT.GUI.Controller.prototype.setValue=function(a){if(void 0!=this.object[this.propertyName])this.object[this.propertyName]=a;else{var b={};b[this.propertyName]=a,this.object.set(b)}return null!=this.changeFunction&&this.changeFunction.call(this,a),this.updateDisplay(),this},DAT.GUI.Controller.prototype.getValue=function(){var a=this.object[this.propertyName];return void 0==a&&(a=this.object.get(this.propertyName)),a},DAT.GUI.Controller.prototype.updateDisplay=function(){},DAT.GUI.Controller.prototype.onChange=function(a){return this.changeFunction=a,this},DAT.GUI.Controller.prototype.onFinishChange=function(a){return this.finishChangeFunction=a,this},DAT.GUI.Controller.prototype.options=function(){var a=this,b=document.createElement("select");if(1==arguments.length){var c,d=arguments[0];for(c in d){var e=document.createElement("option");e.innerHTML=c,e.setAttribute("value",d[c]),arguments[c]==this.getValue()&&(e.selected=!0),b.appendChild(e)}}else for(c=0;c<arguments.length;c++)e=document.createElement("option"),e.innerHTML=arguments[c],e.setAttribute("value",arguments[c]),arguments[c]==this.getValue()&&(e.selected=!0),b.appendChild(e);return b.addEventListener("change",function(){a.setValue(this.value),null!=a.finishChangeFunction&&a.finishChangeFunction.call(this,a.getValue())},!1),a.domElement.appendChild(b),this},DAT.GUI.ControllerBoolean=function(){this.type="boolean",DAT.GUI.Controller.apply(this,arguments);var a=this,b=document.createElement("input");b.setAttribute("type","checkbox"),b.checked=this.getValue(),this.setValue(this.getValue()),this.domElement.addEventListener("click",function(c){b.checked=!b.checked,c.preventDefault(),a.setValue(b.checked)},!1),b.addEventListener("mouseup",function(){b.checked=!b.checked},!1),this.domElement.style.cursor="pointer",this.propertyNameElement.style.cursor="pointer",this.domElement.appendChild(b),this.updateDisplay=function(){b.checked=a.getValue()},this.setValue=function(a){if("boolean"!=typeof a)try{a=eval(a)}catch(b){}return DAT.GUI.Controller.prototype.setValue.call(this,a)}},DAT.GUI.extendController(DAT.GUI.ControllerBoolean),DAT.GUI.ControllerFunction=function(){this.type="function";var a=this;DAT.GUI.Controller.apply(this,arguments),this.domElement.addEventListener("click",function(){a.fire()},!1),this.domElement.style.cursor="pointer",this.propertyNameElement.style.cursor="pointer";var b=null;this.onFire=function(a){return b=a,this},this.fire=function(){null!=b&&b.call(this),a.object[a.propertyName].call(a.object)}},DAT.GUI.extendController(DAT.GUI.ControllerFunction),DAT.GUI.ControllerNumber=function(){this.type="number",DAT.GUI.Controller.apply(this,arguments);var a=this,b=!1,c=!1,d=0,e=0,f=arguments[3],g=arguments[4],h=arguments[5];this.min=function(){var b=!1;return void 0==f&&void 0!=g&&(b=!0),0==arguments.length?f:(f=arguments[0],b&&(k(),void 0==h&&(h=.01*(g-f))),a)},this.max=function(){var b=!1;return void 0!=f&&void 0==g&&(b=!0),0==arguments.length?g:(g=arguments[0],b&&(k(),void 0==h&&(h=.01*(g-f))),a)},this.step=function(){return 0==arguments.length?h:(h=arguments[0],a)},this.getMin=function(){return f},this.getMax=function(){return g},this.getStep=function(){return void 0==h?void 0!=g&&void 0!=f?(g-f)/100:1:h};var i=document.createElement("input");i.setAttribute("id",this.propertyName),i.setAttribute("type","text"),i.setAttribute("value",this.getValue()),h&&i.setAttribute("step",h),this.domElement.appendChild(i);var j,k=function(){j=new DAT.GUI.ControllerNumberSlider(a,f,g,h,a.getValue()),a.domElement.appendChild(j.domElement)};void 0!=f&&void 0!=g&&k(),i.addEventListener("blur",function(){var b=parseFloat(this.value);j&&DAT.GUI.removeClass(a.domElement,"active"),isNaN(b)||a.setValue(b)},!1),i.addEventListener("mousewheel",function(b){return b.preventDefault(),a.setValue(a.getValue()+Math.abs(b.wheelDeltaY)/b.wheelDeltaY*a.getStep()),!1},!1),i.addEventListener("mousedown",function(a){e=d=a.pageY,DAT.GUI.makeSelectable(i),document.addEventListener("mousemove",m,!1),document.addEventListener("mouseup",l,!1)},!1),i.addEventListener("keydown",function(b){switch(b.keyCode){case 13:b=parseFloat(this.value),a.setValue(b);break;case 38:b=a.getValue()+a.getStep(),a.setValue(b);break;case 40:b=a.getValue()-a.getStep(),a.setValue(b)}},!1);var l=function(){document.removeEventListener("mousemove",m,!1),DAT.GUI.makeSelectable(i),null!=a.finishChangeFunction&&a.finishChangeFunction.call(this,a.getValue()),c=b=!1,document.removeEventListener("mouseup",l,!1)},m=function(f){e=d,d=f.pageY;var g=e-d;return!b&&!c&&(0==g?b=!0:c=!0),b?!0:(DAT.GUI.addClass(a.domElement,"active"),DAT.GUI.makeUnselectable(a.parent.domElement),DAT.GUI.makeUnselectable(i),f.preventDefault(),f=a.getValue()+g*a.getStep(),a.setValue(f),!1)};this.options=function(){return a.noSlider(),a.domElement.removeChild(i),DAT.GUI.Controller.prototype.options.apply(this,arguments)},this.noSlider=function(){return j&&a.domElement.removeChild(j.domElement),this},this.setValue=function(a){return a=parseFloat(a),void 0!=f&&f>=a?a=f:void 0!=g&&a>=g&&(a=g),DAT.GUI.Controller.prototype.setValue.call(this,a)},this.updateDisplay=function(){i.value=DAT.GUI.roundToDecimal(a.getValue(),4),j&&(j.value=a.getValue())}},DAT.GUI.extendController(DAT.GUI.ControllerNumber),DAT.GUI.ControllerNumberSlider=function(a,b,c,d,e){var f=!1,g=this;this.domElement=document.createElement("div"),this.domElement.setAttribute("class","guidat-slider-bg"),this.fg=document.createElement("div"),this.fg.setAttribute("class","guidat-slider-fg"),this.domElement.appendChild(this.fg);var h=function(b){if(f){var c;c=g.domElement;var d=0,e=0;if(c.offsetParent){do d+=c.offsetLeft,e+=c.offsetTop;while(c=c.offsetParent);c=[d,e]}else c=void 0;b=DAT.GUI.map(b.pageX,c[0],c[0]+g.domElement.offsetWidth,a.getMin(),a.getMax()),b=Math.round(b/a.getStep())*a.getStep(),a.setValue(b)}};this.domElement.addEventListener("mousedown",function(b){f=!0,DAT.GUI.addClass(a.domElement,"active"),h(b),document.addEventListener("mouseup",i,!1)},!1);var i=function(){DAT.GUI.removeClass(a.domElement,"active"),f=!1,null!=a.finishChangeFunction&&a.finishChangeFunction.call(this,a.getValue()),document.removeEventListener("mouseup",i,!1)};this.__defineSetter__("value",function(b){this.fg.style.width=DAT.GUI.map(b,a.getMin(),a.getMax(),0,100)+"%"}),document.addEventListener("mousemove",h,!1),this.value=e},DAT.GUI.ControllerString=function(){this.type="string";var a=this;DAT.GUI.Controller.apply(this,arguments);var b=document.createElement("input"),c=this.getValue();b.setAttribute("value",c),b.setAttribute("spellcheck","false"),this.domElement.addEventListener("mouseup",function(){b.focus(),b.select()},!1),b.addEventListener("keyup",function(c){13==c.keyCode&&null!=a.finishChangeFunction&&(a.finishChangeFunction.call(this,a.getValue()),b.blur()),a.setValue(b.value)},!1),b.addEventListener("mousedown",function(){DAT.GUI.makeSelectable(b)},!1),b.addEventListener("blur",function(){DAT.GUI.supressHotKeys=!1,null!=a.finishChangeFunction&&a.finishChangeFunction.call(this,a.getValue())},!1),b.addEventListener("focus",function(){DAT.GUI.supressHotKeys=!0},!1),this.updateDisplay=function(){b.value=a.getValue()},this.options=function(){return a.domElement.removeChild(b),DAT.GUI.Controller.prototype.options.apply(this,arguments)},this.domElement.appendChild(b)},DAT.GUI.extendController(DAT.GUI.ControllerString),DAT.GUI.inlineCSS="#guidat { position: fixed; top: 0; right: 0; width: auto; z-index: 1001; text-align: right; } .guidat { color: #fff; opacity: 0.97; text-align: left; float: right; margin-right: 20px; margin-bottom: 20px; background-color: #fff; } .guidat, .guidat input { font: 9.5px Lucida Grande, sans-serif; } .guidat-controllers { height: 300px; overflow-y: auto; overflow-x: hidden; background-color: rgba(0, 0, 0, 0.1); } a.guidat-toggle:link, a.guidat-toggle:visited, a.guidat-toggle:active { text-decoration: none; cursor: pointer; color: #fff; background-color: #222; text-align: center; display: block; padding: 5px; } a.guidat-toggle:hover { background-color: #000; } .guidat-controller { padding: 3px; height: 25px; clear: left; border-bottom: 1px solid #222; background-color: #111; } .guidat-controller, .guidat-controller input, .guidat-slider-bg, .guidat-slider-fg { -moz-transition: background-color 0.15s linear; -webkit-transition: background-color 0.15s linear; transition: background-color 0.15s linear; } .guidat-controller.boolean:hover, .guidat-controller.function:hover { background-color: #000; } .guidat-controller input { float: right; outline: none; border: 0; padding: 4px; margin-top: 2px; background-color: #222; } .guidat-controller select { margin-top: 4px; float: right; } .guidat-controller input:hover { background-color: #444; } .guidat-controller input:focus, .guidat-controller.active input { background-color: #555; color: #fff; } .guidat-controller.number { border-left: 5px solid #00aeff; } .guidat-controller.string { border-left: 5px solid #1ed36f; } .guidat-controller.string input { border: 0; color: #1ed36f; margin-right: 2px; width: 148px; } .guidat-controller.boolean { border-left: 5px solid #54396e; } .guidat-controller.function { border-left: 5px solid #e61d5f; } .guidat-controller.number input[type=text] { width: 35px; margin-left: 5px; margin-right: 2px; color: #00aeff; } .guidat .guidat-controller.boolean input { margin-top: 6px; margin-right: 2px; font-size: 20px; } .guidat-controller:last-child { border-bottom: none; -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.5); -moz-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.5); box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.5); } .guidat-propertyname { padding: 5px; padding-top: 7px; cursor: default; display: inline-block; } .guidat-controller .guidat-slider-bg:hover, .guidat-controller.active .guidat-slider-bg { background-color: #444; } .guidat-controller .guidat-slider-bg .guidat-slider-fg:hover, .guidat-controller.active .guidat-slider-bg .guidat-slider-fg { background-color: #52c8ff; } .guidat-slider-bg { background-color: #222; cursor: ew-resize; width: 40%; margin-top: 2px; float: right; height: 21px; } .guidat-slider-fg { cursor: ew-resize; background-color: #00aeff; height: 21px; } ";
//# sourceMappingURL=dat-gui.map