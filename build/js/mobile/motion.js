function hashArgs(){for(var a,b=new Object,c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b[a[0]]=a[1];return b}function initSocket(){socket=io.connect(),socket.on("added_room_mobile"+id,function(a){console.log("received",a),roomid=a.roomid,$("#pinBox").hide(),authoricated=!0,$(".modal-backdrop").remove(),0==initedCanvas&&(initCanvas(),initedCanvas=!0)}),socket.on("failed_add_room_mobile"+id,function(){location.href="/mobile.html?invalid_pin=1"}),socket.on("start",function(){console.log("STARTED"),started=!0}),socket.on("ping",function(a){socket.emit("ping_return",{id:id,roomid:a.roomid,time:a.time})})}function reportMotion(){authoricated&&(last_orientation_event=event,reportMotionBase(event,"window.ondeviceorientation"))}function reportMotionLast(){void 0!=lastEvent&&reportMotionBase(lastEvent,"reportMotionLast")}function reportMotionBase(a,b){if(authoricated){lastEvent=a;var c={id:id,roomid:roomid,x:a.alpha-base_x,y:a.beta,z:a.gamma,ch:a.webkitCompassHeading,ca:a.webkitCompassAccuracy,e:b};"reportMotionLast"==b&&(c.touch=istouch),socket.emit("report_motion",c)}waitingLandscape&&a.gamma>45&&a.gamma<135&&landscaped()}var id=String(Math.floor(1e6*Math.random())),roomid,socket,ready=!1,authoricated=!1,supportsTouchend=!1,base_x=0,last_orientation_event,started=!1,lastEvent;
//# sourceMappingURL=motion.map