var bkcore=bkcore||{};bkcore.hexgl=bkcore.hexgl||{},bkcore.hexgl.tracks=bkcore.hexgl.tracks||{},bkcore.hexgl.tracks.Cityscape={lib:null,materials:{},checkpoints:{list:[0,1,2],start:0,last:2},spawn:{x:-2268,y:387,z:-886},spawnRotation:{x:0,y:0,z:0},analyser:null,pixelRatio:2048/6e3,load:function(a,b){this.lib=new bkcore.threejs.Loader(a),this.lib.load(1>b?{textures:{hex:"textures/hud/hex.jpg","ship.feisar.diffuse":"textures/ships/feisar/diffuse.jpg","booster.diffuse":"textures/ships/feisar/booster/booster.png","booster.sprite":"textures/ships/feisar/booster/boostersprite.jpg","track.cityscape.diffuse":"textures/tracks/cityscape/diffuse.jpg","track.cityscape.scrapers1.diffuse":"textures/tracks/cityscape/scrapers1/diffuse.jpg","track.cityscape.scrapers2.diffuse":"textures/tracks/cityscape/scrapers2/diffuse.jpg","track.cityscape.start.diffuse":"textures/tracks/cityscape/start/diffuse.jpg","track.cityscape.start.banner":"textures/tracks/cityscape/start/start.jpg","bonus.base.diffuse":"textures/bonus/base/diffuse.jpg"},texturesCube:{"skybox.dawnclouds":"textures/skybox/dawnclouds/%1.jpg"},geometries:{"bonus.base":"geometries/bonus/base/base.js",booster:"geometries/booster/booster.js","ship.feisar":"geometries/ships/feisar/feisar.js","track.cityscape":"geometries/tracks/cityscape/track.js","track.cityscape.scrapers1":"geometries/tracks/cityscape/scrapers1.js","track.cityscape.scrapers2":"geometries/tracks/cityscape/scrapers2.js","track.cityscape.start":"geometries/tracks/cityscape/start.js","track.cityscape.start.banner":"geometries/tracks/cityscape/startbanner.js","track.cityscape.bonus.speed":"geometries/tracks/cityscape/bonus/speed.js"},analysers:{"track.cityscape.collision":"textures/tracks/cityscape/collision.png","track.cityscape.height":"textures/tracks/cityscape/height.png"},images:{"hud.bg":"textures/hud/hud-bg.png","hud.speed":"textures/hud/hud-fg-speed.png","hud.shield":"textures/hud/hud-fg-shield.png"}}:{textures:{hex:"textures/hud/hex.jpg",spark:"textures/particles/spark.png",cloud:"textures/particles/cloud.png","ship.feisar.diffuse":"textures/ships/feisar/diffuse.jpg","ship.feisar.specular":"textures/ships/feisar/specular.jpg","ship.feisar.normal":"textures/ships/feisar/normal.jpg","booster.diffuse":"textures/ships/feisar/booster/booster.png","booster.sprite":"textures/ships/feisar/booster/boostersprite.jpg","track.cityscape.diffuse":"textures/tracks/cityscape/diffuse.jpg","track.cityscape.specular":"textures/tracks/cityscape/specular.jpg","track.cityscape.normal":"textures/tracks/cityscape/normal.jpg","track.cityscape.scrapers1.diffuse":"textures/tracks/cityscape/scrapers1/diffuse.jpg","track.cityscape.scrapers1.specular":"textures/tracks/cityscape/scrapers1/specular.jpg","track.cityscape.scrapers1.normal":"textures/tracks/cityscape/scrapers1/normal.jpg","track.cityscape.scrapers2.diffuse":"textures/tracks/cityscape/scrapers2/diffuse.jpg","track.cityscape.scrapers2.specular":"textures/tracks/cityscape/scrapers2/specular.jpg","track.cityscape.scrapers2.normal":"textures/tracks/cityscape/scrapers2/normal.jpg","track.cityscape.start.diffuse":"textures/tracks/cityscape/start/diffuse.jpg","track.cityscape.start.specular":"textures/tracks/cityscape/start/specular.jpg","track.cityscape.start.normal":"textures/tracks/cityscape/start/normal.jpg","track.cityscape.start.banner":"textures/tracks/cityscape/start/start.jpg","bonus.base.diffuse":"textures/bonus/base/diffuse.jpg","bonus.base.normal":"textures/bonus/base/normal.jpg","bonus.base.specular":"textures/bonus/base/specular.jpg"},texturesCube:{"skybox.dawnclouds":"textures/skybox/dawnclouds/%1.jpg"},geometries:{"bonus.base":"geometries/bonus/base/base.js",booster:"geometries/booster/booster.js","ship.feisar":"geometries/ships/feisar/feisar.js","track.cityscape":"geometries/tracks/cityscape/track.js","track.cityscape.scrapers1":"geometries/tracks/cityscape/scrapers1.js","track.cityscape.scrapers2":"geometries/tracks/cityscape/scrapers2.js","track.cityscape.start":"geometries/tracks/cityscape/start.js","track.cityscape.start.banner":"geometries/tracks/cityscape/startbanner.js","track.cityscape.bonus.speed":"geometries/tracks/cityscape/bonus/speed.js"},analysers:{"track.cityscape.collision":"textures/tracks/cityscape/collision.png","track.cityscape.height":"textures/tracks/cityscape/height.png"},images:{"hud.bg":"textures/hud/hud-bg.png","hud.speed":"textures/hud/hud-fg-speed.png","hud.shield":"textures/hud/hud-fg-shield.png"}})},buildMaterials:function(){this.quality<1?(this.materials.track=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.diffuse"),ambient:13421772}),this.materials.bonusBase=new THREE.MeshBasicMaterial({map:this.lib.get("textures","bonus.base.diffuse"),ambient:13421772}),this.materials.bonusSpeed=new THREE.MeshBasicMaterial({color:38655}),this.materials.ship=new THREE.MeshBasicMaterial({map:this.lib.get("textures","ship.feisar.diffuse"),ambient:11184810}),this.materials.booster=new THREE.MeshBasicMaterial({map:this.lib.get("textures","booster.diffuse"),transparent:!0}),this.materials.scrapers1=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.scrapers1.diffuse"),ambient:13421772}),this.materials.scrapers2=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.scrapers2.diffuse"),ambient:13421772}),this.materials.start=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.diffuse"),ambient:13421772}),this.materials.startBanner=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.banner"),transparent:!1})):(this.materials.track=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.diffuse"),specular:this.lib.get("textures","track.cityscape.specular"),normal:this.lib.get("textures","track.cityscape.normal"),ambient:16777215,shininess:42,metal:!0,perPixel:!0}),this.materials.bonusBase=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","bonus.base.diffuse"),specular:this.lib.get("textures","bonus.base.specular"),normal:this.lib.get("textures","bonus.base.normal"),normalScale:3,ambient:4473924,shininess:42,metal:!1,perPixel:!1}),this.materials.bonusSpeed=new THREE.MeshBasicMaterial({color:38655}),this.materials.ship=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","ship.feisar.diffuse"),specular:this.lib.get("textures","ship.feisar.specular"),normal:this.lib.get("textures","ship.feisar.normal"),ambient:4473924,shininess:42,metal:!0,perPixel:!1}),this.materials.booster=new THREE.MeshBasicMaterial({map:this.lib.get("textures","booster.diffuse"),transparent:!0}),this.materials.scrapers1=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.scrapers1.diffuse"),specular:this.lib.get("textures","track.cityscape.scrapers1.specular"),normal:this.lib.get("textures","track.cityscape.scrapers1.normal"),cube:this.lib.get("texturesCube","skybox.dawnclouds"),reflectivity:.8,ambient:4473924,shininess:42,metal:!1,perPixel:!1}),this.materials.scrapers2=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.scrapers2.diffuse"),specular:this.lib.get("textures","track.cityscape.scrapers2.specular"),normal:this.lib.get("textures","track.cityscape.scrapers2.normal"),cube:this.lib.get("texturesCube","skybox.dawnclouds"),reflectivity:.8,ambient:0,shininess:42,metal:!1,perPixel:!1}),this.materials.start=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.start.diffuse"),specular:this.lib.get("textures","track.cityscape.start.specular"),normal:this.lib.get("textures","track.cityscape.start.normal"),ambient:11184810,shininess:42,metal:!1,perPixel:!1}),this.materials.startBanner=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.banner"),transparent:!1}))},buildScenes:function(a,b){this.analyser=this.lib.get("analysers","track.cityscape.collision");var c=new THREE.Scene,d=new THREE.PerspectiveCamera(70,a.width/a.height,1,6e3);c.add(d);var e=THREE.ShaderUtils.lib.cube;e.uniforms.tCube.texture=this.lib.get("texturesCube","skybox.dawnclouds");var f=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:e.uniforms,depthWrite:!1}),g=new THREE.Mesh(new THREE.CubeGeometry(100,100,100),f);g.flipSided=!0,c.add(g),a.manager.add("sky",c,d);var h=12303291,i=16777215,j=new THREE.PerspectiveCamera(70,a.width/a.height,1,6e4),k=new THREE.Scene;k.add(j),k.add(new THREE.AmbientLight(h));var l=new THREE.DirectionalLight(i,1.5,3e4);l.position.set(-4e3,1200,1800),l.lookAt(new THREE.Vector3),b>0&&(l.castShadow=!0,l.shadowCameraNear=50,l.shadowCameraFar=2*j.far,l.shadowCameraRight=3e3,l.shadowCameraLeft=-3e3,l.shadowCameraTop=3e3,l.shadowCameraBottom=-3e3,l.shadowBias=1e-4,l.shadowDarkness=.7,l.shadowMapWidth=2048,l.shadowMapHeight=2048),k.add(l);var m=a.createMesh(k,this.lib.get("geometries","ship.feisar"),-2268,10,-886,this.materials.ship),n=a.createMesh(m,this.lib.get("geometries","booster"),0,.665,-3.8,this.materials.booster);n.depthWrite=!1;var o=new THREE.Sprite({map:this.lib.get("textures","booster.sprite"),blending:THREE.AdditiveBlending,useScreenCoordinates:!1,color:16777215});o.scale.set(.02,.02,.02),o.mergeWith3D=!1,n.add(o);var p=new THREE.PointLight(41727,4,60);p.position.set(0,.665,-4),b>0&&m.add(p);var q=new bkcore.hexgl.ShipControls(a.document);q.collisionMap=this.lib.get("analysers","track.cityscape.collision"),q.collisionPixelRatio=2048/6e3,q.collisionDetection=!0,q.heightMap=this.lib.get("analysers","track.cityscape.height"),q.heightPixelRatio=2048/6e3,q.heightBias=4,q.heightScale=10,q.control(m),a.components.shipControls=q,a.tweakShipControls();var r={scene:k,shipControls:q,booster:n,boosterSprite:o,boosterLight:p,useParticles:!1};b>0&&(r.textureCloud=this.lib.get("textures","cloud"),r.textureSpark=this.lib.get("textures","spark"),r.useParticles=!0),a.components.shipEffects=new bkcore.hexgl.ShipEffects(r);var s=(a.createMesh(k,this.lib.get("geometries","track.cityscape"),0,-5,0,this.materials.track),a.createMesh(k,this.lib.get("geometries","bonus.base"),0,-5,0,this.materials.bonusBase),a.createMesh(k,this.lib.get("geometries","track.cityscape.bonus.speed"),0,-5,0,this.materials.bonusSpeed));s.receiveShadow=!1;var t=(a.createMesh(k,this.lib.get("geometries","track.cityscape.scrapers1"),0,0,0,this.materials.scrapers1),a.createMesh(k,this.lib.get("geometries","track.cityscape.scrapers2"),0,0,0,this.materials.scrapers2),a.createMesh(k,this.lib.get("geometries","track.cityscape.start"),0,-5,0,this.materials.start),a.createMesh(k,this.lib.get("geometries","track.cityscape.start.banner"),0,-5,0,this.materials.startBanner));t.doubleSided=!0,a.components.cameraChase=new bkcore.hexgl.CameraChase({target:m,camera:j,cameraCube:a.manager.get("sky").camera,lerp:.5,yoffset:8,zoffset:10,viewOffset:10}),a.manager.add("game",k,j,function(a){a>25&&this.objects.lowFPS<1e3&&this.objects.lowFPS++;var b=a/16.6;this.objects.components.shipControls.update(b),this.objects.components.shipEffects.update(b),this.objects.components.cameraChase.update(b,this.objects.components.shipControls.getSpeedRatio()),this.objects.composers.game.render(b),this.objects.hud.update(this.objects.components.shipControls.getRealSpeed(100),this.objects.components.shipControls.getRealSpeedRatio(),this.objects.components.shipControls.getShield(100),this.objects.components.shipControls.getShieldRatio()),this.objects.extras.vignetteColor.setHex(this.objects.components.shipControls.getShieldRatio()<.2?10035232:4557489)},{components:a.components,composers:a.composers,extras:a.extras,quality:b,hud:a.hud,time:0,lowFPS:0})}};var bkcore=bkcore||{};bkcore.hexgl=bkcore.hexgl||{},bkcore.hexgl.tracks=bkcore.hexgl.tracks||{},bkcore.hexgl.tracks.Cityscape={lib:null,materials:{},checkpoints:{list:[0,1,2],start:0,last:2},spawn:{x:-2268,y:387,z:-886},spawnRotation:{x:0,y:0,z:0},analyser:null,pixelRatio:2048/6e3,load:function(a,b){this.lib=new bkcore.threejs.Loader(a),this.lib.load(1>b?{textures:{hex:"textures/hud/hex.jpg","ship.feisar.diffuse":"textures/ships/feisar/diffuse.jpg","booster.diffuse":"textures/ships/feisar/booster/booster.png","booster.sprite":"textures/ships/feisar/booster/boostersprite.jpg","track.cityscape.diffuse":"textures/tracks/cityscape/diffuse.jpg","track.cityscape.scrapers1.diffuse":"textures/tracks/cityscape/scrapers1/diffuse.jpg","track.cityscape.scrapers2.diffuse":"textures/tracks/cityscape/scrapers2/diffuse.jpg","track.cityscape.start.diffuse":"textures/tracks/cityscape/start/diffuse.jpg","track.cityscape.start.banner":"textures/tracks/cityscape/start/start.jpg","bonus.base.diffuse":"textures/bonus/base/diffuse.jpg"},texturesCube:{"skybox.dawnclouds":"textures/skybox/dawnclouds/%1.jpg"},geometries:{"bonus.base":"geometries/bonus/base/base.js",booster:"geometries/booster/booster.js","ship.feisar":"geometries/ships/feisar/feisar.js","track.cityscape":"geometries/tracks/cityscape/track.js","track.cityscape.scrapers1":"geometries/tracks/cityscape/scrapers1.js","track.cityscape.scrapers2":"geometries/tracks/cityscape/scrapers2.js","track.cityscape.start":"geometries/tracks/cityscape/start.js","track.cityscape.start.banner":"geometries/tracks/cityscape/startbanner.js","track.cityscape.bonus.speed":"geometries/tracks/cityscape/bonus/speed.js"},analysers:{"track.cityscape.collision":"textures/tracks/cityscape/collision.png","track.cityscape.height":"textures/tracks/cityscape/height.png"},images:{"hud.bg":"textures/hud/hud-bg.png","hud.speed":"textures/hud/hud-fg-speed.png","hud.shield":"textures/hud/hud-fg-shield.png"}}:{textures:{hex:"textures/hud/hex.jpg",spark:"textures/particles/spark.png",cloud:"textures/particles/cloud.png","ship.feisar.diffuse":"textures/ships/feisar/diffuse.jpg","ship.feisar.specular":"textures/ships/feisar/specular.jpg","ship.feisar.normal":"textures/ships/feisar/normal.jpg","booster.diffuse":"textures/ships/feisar/booster/booster.png","booster.sprite":"textures/ships/feisar/booster/boostersprite.jpg","track.cityscape.diffuse":"textures/tracks/cityscape/diffuse.jpg","track.cityscape.specular":"textures/tracks/cityscape/specular.jpg","track.cityscape.normal":"textures/tracks/cityscape/normal.jpg","track.cityscape.scrapers1.diffuse":"textures/tracks/cityscape/scrapers1/diffuse.jpg","track.cityscape.scrapers1.specular":"textures/tracks/cityscape/scrapers1/specular.jpg","track.cityscape.scrapers1.normal":"textures/tracks/cityscape/scrapers1/normal.jpg","track.cityscape.scrapers2.diffuse":"textures/tracks/cityscape/scrapers2/diffuse.jpg","track.cityscape.scrapers2.specular":"textures/tracks/cityscape/scrapers2/specular.jpg","track.cityscape.scrapers2.normal":"textures/tracks/cityscape/scrapers2/normal.jpg","track.cityscape.start.diffuse":"textures/tracks/cityscape/start/diffuse.jpg","track.cityscape.start.specular":"textures/tracks/cityscape/start/specular.jpg","track.cityscape.start.normal":"textures/tracks/cityscape/start/normal.jpg","track.cityscape.start.banner":"textures/tracks/cityscape/start/start.jpg","bonus.base.diffuse":"textures/bonus/base/diffuse.jpg","bonus.base.normal":"textures/bonus/base/normal.jpg","bonus.base.specular":"textures/bonus/base/specular.jpg"},texturesCube:{"skybox.dawnclouds":"textures/skybox/dawnclouds/%1.jpg"},geometries:{"bonus.base":"geometries/bonus/base/base.js",booster:"geometries/booster/booster.js","ship.feisar":"geometries/ships/feisar/feisar.js","track.cityscape":"geometries/tracks/cityscape/track.js","track.cityscape.scrapers1":"geometries/tracks/cityscape/scrapers1.js","track.cityscape.scrapers2":"geometries/tracks/cityscape/scrapers2.js","track.cityscape.start":"geometries/tracks/cityscape/start.js","track.cityscape.start.banner":"geometries/tracks/cityscape/startbanner.js","track.cityscape.bonus.speed":"geometries/tracks/cityscape/bonus/speed.js"},analysers:{"track.cityscape.collision":"textures/tracks/cityscape/collision.png","track.cityscape.height":"textures/tracks/cityscape/height.png"},images:{"hud.bg":"textures/hud/hud-bg.png","hud.speed":"textures/hud/hud-fg-speed.png","hud.shield":"textures/hud/hud-fg-shield.png"}})},buildMaterials:function(){this.quality<1?(this.materials.track=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.diffuse"),ambient:13421772}),this.materials.bonusBase=new THREE.MeshBasicMaterial({map:this.lib.get("textures","bonus.base.diffuse"),ambient:13421772}),this.materials.bonusSpeed=new THREE.MeshBasicMaterial({color:38655}),this.materials.ship=new THREE.MeshBasicMaterial({map:this.lib.get("textures","ship.feisar.diffuse"),ambient:11184810}),this.materials.booster=new THREE.MeshBasicMaterial({map:this.lib.get("textures","booster.diffuse"),transparent:!0}),this.materials.scrapers1=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.scrapers1.diffuse"),ambient:13421772}),this.materials.scrapers2=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.scrapers2.diffuse"),ambient:13421772}),this.materials.start=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.diffuse"),ambient:13421772}),this.materials.startBanner=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.banner"),transparent:!1})):(this.materials.track=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.diffuse"),specular:this.lib.get("textures","track.cityscape.specular"),normal:this.lib.get("textures","track.cityscape.normal"),ambient:16777215,shininess:42,metal:!0,perPixel:!0}),this.materials.bonusBase=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","bonus.base.diffuse"),specular:this.lib.get("textures","bonus.base.specular"),normal:this.lib.get("textures","bonus.base.normal"),normalScale:3,ambient:4473924,shininess:42,metal:!1,perPixel:!1}),this.materials.bonusSpeed=new THREE.MeshBasicMaterial({color:38655}),this.materials.ship=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","ship.feisar.diffuse"),specular:this.lib.get("textures","ship.feisar.specular"),normal:this.lib.get("textures","ship.feisar.normal"),ambient:4473924,shininess:42,metal:!0,perPixel:!1}),this.materials.booster=new THREE.MeshBasicMaterial({map:this.lib.get("textures","booster.diffuse"),transparent:!0}),this.materials.scrapers1=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.scrapers1.diffuse"),specular:this.lib.get("textures","track.cityscape.scrapers1.specular"),normal:this.lib.get("textures","track.cityscape.scrapers1.normal"),cube:this.lib.get("texturesCube","skybox.dawnclouds"),reflectivity:.8,ambient:4473924,shininess:42,metal:!1,perPixel:!1}),this.materials.scrapers2=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.scrapers2.diffuse"),specular:this.lib.get("textures","track.cityscape.scrapers2.specular"),normal:this.lib.get("textures","track.cityscape.scrapers2.normal"),cube:this.lib.get("texturesCube","skybox.dawnclouds"),reflectivity:.8,ambient:0,shininess:42,metal:!1,perPixel:!1}),this.materials.start=bkcore.Utils.createNormalMaterial({diffuse:this.lib.get("textures","track.cityscape.start.diffuse"),specular:this.lib.get("textures","track.cityscape.start.specular"),normal:this.lib.get("textures","track.cityscape.start.normal"),ambient:11184810,shininess:42,metal:!1,perPixel:!1}),this.materials.startBanner=new THREE.MeshBasicMaterial({map:this.lib.get("textures","track.cityscape.start.banner"),transparent:!1}))},buildScenes:function(a,b){this.analyser=this.lib.get("analysers","track.cityscape.collision");var c=new THREE.Scene,d=new THREE.PerspectiveCamera(70,a.width/a.height,1,6e3);c.add(d);var e=THREE.ShaderUtils.lib.cube;e.uniforms.tCube.texture=this.lib.get("texturesCube","skybox.dawnclouds");var f=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:e.uniforms,depthWrite:!1}),g=new THREE.Mesh(new THREE.CubeGeometry(100,100,100),f);g.flipSided=!0,c.add(g),a.manager.add("sky",c,d);var h=12303291,i=16777215,j=new THREE.PerspectiveCamera(70,a.width/a.height,1,6e4),k=new THREE.Scene;k.add(j),k.add(new THREE.AmbientLight(h));var l=new THREE.DirectionalLight(i,1.5,3e4);l.position.set(-4e3,1200,1800),l.lookAt(new THREE.Vector3),b>0&&(l.castShadow=!0,l.shadowCameraNear=50,l.shadowCameraFar=2*j.far,l.shadowCameraRight=3e3,l.shadowCameraLeft=-3e3,l.shadowCameraTop=3e3,l.shadowCameraBottom=-3e3,l.shadowBias=1e-4,l.shadowDarkness=.7,l.shadowMapWidth=2048,l.shadowMapHeight=2048),k.add(l);var m=a.createMesh(k,this.lib.get("geometries","ship.feisar"),-2268,10,-886,this.materials.ship),n=a.createMesh(m,this.lib.get("geometries","booster"),0,.665,-3.8,this.materials.booster);n.depthWrite=!1;var o=new THREE.Sprite({map:this.lib.get("textures","booster.sprite"),blending:THREE.AdditiveBlending,useScreenCoordinates:!1,color:16777215});o.scale.set(.02,.02,.02),o.mergeWith3D=!1,n.add(o);var p=new THREE.PointLight(41727,4,60);p.position.set(0,.665,-4),b>0&&m.add(p);var q=new bkcore.hexgl.ShipControls(a.document);q.collisionMap=this.lib.get("analysers","track.cityscape.collision"),q.collisionPixelRatio=2048/6e3,q.collisionDetection=!0,q.heightMap=this.lib.get("analysers","track.cityscape.height"),q.heightPixelRatio=2048/6e3,q.heightBias=4,q.heightScale=10,q.control(m),a.components.shipControls=q,a.tweakShipControls();var r={scene:k,shipControls:q,booster:n,boosterSprite:o,boosterLight:p,useParticles:!1};b>0&&(r.textureCloud=this.lib.get("textures","cloud"),r.textureSpark=this.lib.get("textures","spark"),r.useParticles=!0),a.components.shipEffects=new bkcore.hexgl.ShipEffects(r);var s=(a.createMesh(k,this.lib.get("geometries","track.cityscape"),0,-5,0,this.materials.track),a.createMesh(k,this.lib.get("geometries","bonus.base"),0,-5,0,this.materials.bonusBase),a.createMesh(k,this.lib.get("geometries","track.cityscape.bonus.speed"),0,-5,0,this.materials.bonusSpeed));s.receiveShadow=!1;var t=(a.createMesh(k,this.lib.get("geometries","track.cityscape.scrapers1"),0,0,0,this.materials.scrapers1),a.createMesh(k,this.lib.get("geometries","track.cityscape.scrapers2"),0,0,0,this.materials.scrapers2),a.createMesh(k,this.lib.get("geometries","track.cityscape.start"),0,-5,0,this.materials.start),a.createMesh(k,this.lib.get("geometries","track.cityscape.start.banner"),0,-5,0,this.materials.startBanner));t.doubleSided=!0,a.components.cameraChase=new bkcore.hexgl.CameraChase({target:m,camera:j,cameraCube:a.manager.get("sky").camera,lerp:.5,yoffset:8,zoffset:10,viewOffset:10}),a.manager.add("game",k,j,function(a){a>25&&this.objects.lowFPS<1e3&&this.objects.lowFPS++;var b=a/16.6;this.objects.components.shipControls.update(b),this.objects.components.shipEffects.update(b),this.objects.components.cameraChase.update(b,this.objects.components.shipControls.getSpeedRatio()),this.objects.composers.game.render(b),this.objects.hud.update(this.objects.components.shipControls.getRealSpeed(100),this.objects.components.shipControls.getRealSpeedRatio(),this.objects.components.shipControls.getShield(100),this.objects.components.shipControls.getShieldRatio()),this.objects.extras.vignetteColor.setHex(this.objects.components.shipControls.getShieldRatio()<.2?10035232:4557489)},{components:a.components,composers:a.composers,extras:a.extras,quality:b,hud:a.hud,time:0,lowFPS:0})}};
//# sourceMappingURL=Cityscape.map