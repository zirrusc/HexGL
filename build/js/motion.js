var id=String(Math.floor(1e6*Math.random())),roomid,mobile_enabled=!0,mobile_clients=[],mobile=mobile||{};mobile.Direction=0,mobile.Forward=0,mobile.MaxDirection=.02,mobile.DirectionXFactor=1e-5,mobile.DirectionYFactor=1/3e3,mobile.MaxForward=.2,mobile.NormalForward=.05,mobile.ForwardFactor=5e-4,mobile.ForwardNeutral=60,mobile.ReportOrientation=function(a){if("window.ondeviceorientation"==a.e){var b=0,c=-a.y*this.DirectionYFactor;this.Direction=b+c,this.Direction<-this.MaxDirection&&(this.Direction=-this.MaxDirection),this.Direction>this.MaxDirection&&(this.Direction=this.MaxDirection)}else if("canvas.touchstart"==a.e)this.Forward=this.NormalForward;else if("canvas.touchend"==a.e)this.Forward=0;else if("reportMotionLast"==a.e){var b=0,c=-a.y*this.DirectionYFactor;this.Direction=b+c,this.Direction<-this.MaxDirection&&(this.Direction=-this.MaxDirection),this.Direction>this.MaxDirection&&(this.Direction=this.MaxDirection),1==a.touch?this.Forward=this.NormalForward:0==a.touch&&(this.Forward=0)}else console.log("mobile.ReportOrientation got unknown arguments: data['e'] = ",a.e)},$(window).load(function(){setQuality(1)});var socket;$(function(){socket=io.connect(),socket.on("added_room_pc",function(a){roomid=a.roomid;var b=("000"+Math.floor(roomid/1e3)).slice(-3),c=("000"+(roomid-1e3*b)).slice(-3);$("#pinbox-value").text("PIN: "+b+" "+c),$("#pinbox-status-sign").html("<div class='glyphicon glyphicon-certificate'></div>"),$("#pinbox-status-text").text("モバイルの接続待ちです")}),socket.on("added_room_mobile",function(a){mobile_clients[mobile_clients.length]=a.id,$("#pinbox-status-sign").html("<div class='glyphicon glyphicon-ok'></div>"),$("#pinbox-status-text").text(mobile_clients.length+"台のモバイルと接続しました");var b=+new Date;console.log(b),socket.emit("ping",{id:id,roomid:roomid,time:b})}),socket.on("report_motion",function(a){mobile_enabled&&mobile.ReportOrientation(a)}),socket.on("ping_return",function(a){console.log(a.time);var b=(+new Date-a.time)/1e3/2,c=b>=.1?"遅いかもしれません":"快適に動作できます";$("#pinbox-status-time").text("PC-Mobile間の片道通信時間："+b+"秒、"+c)}),socket.emit("add_room_pc",{id:id}),$("#pinbox-status-sign").html("<div class='glyphicon glyphicon-refresh'></div>"),$("#pinbox-status-text").text("通信中"),$("#mc-mobile-url").text(location.href.replace("pc.html","").replace("#content",""))});var start_game=function(a){console.log("START"),socket.emit("start",{id:id,roomid:roomid,mode:a}),beta(a)};
//# sourceMappingURL=motion.map